<!DOCTYPE html>
<html lang="en">
<head>
    <title>Extrude polygons for 3D indoor mapping</title>
    <meta property="og:description" content="Create a 3D indoor map with the fill-extrude-height paint property." />
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@5.5.0/dist/maplibre-gl.css' />
    <script src='https://unpkg.com/maplibre-gl@5.5.0/dist/maplibre-gl.js'></script>
    <style>
        body { margin: 0; padding: 0; }
        html, body, #map { height: 100%; }
    </style>
</head>
<body>
<div id="map"></div>
<script>
    const pain = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              -8.660124400907128,
              40.633245362958554
            ],
            [
              -8.660126797163427,
              40.633245362958554
            ],
            [
              -8.660126797163427,
              40.63322423488398
            ],
            [
              -8.660045803700504,
              40.63322423488398
            ],
            [
              -8.660045803700504,
              40.633245362958554
            ],
            [
              -8.660048199956803,
              40.633245362958554
            ],
            [
              -8.660048199956803,
              40.63325325
            ],
            [
              -8.659869918488122,
              40.63325325
            ],
            [
              -8.659869918488122,
              40.63323013109084
            ],
            [
              -8.65983061988481,
              40.63323013109084
            ],
            [
              -8.65983061988481,
              40.63320015870599
            ],
            [
              -8.65977934,
              40.63320015870599
            ],
            [
              -8.65977934,
              40.63312006856285
            ],
            [
              -8.65983061988481,
              40.63312006856285
            ],
            [
              -8.65983061988481,
              40.63308813077571
            ],
            [
              -8.659869918488122,
              40.63308813077571
            ],
            [
              -8.659869918488122,
              40.63306602
            ],
            [
              -8.66030412012959,
              40.63306602
            ],
            [
              -8.66030412012959,
              40.633088087045515
            ],
            [
              -8.66039278161267,
              40.63308813077571
            ],
            [
              -8.66039278161267,
              40.63311564640771
            ],
            [
              -8.660403325140388,
              40.63311564640771
            ],
            [
              -8.660407159150466,
              40.633136283131705
            ],
            [
              -8.660416264924406,
              40.63315102364885
            ],
            [
              -8.660430163210942,
              40.63316429011428
            ],
            [
              -8.66044070673866,
              40.6331809960337
            ],
            [
              -8.66044502,
              40.63320261545884
            ],
            [
              -8.66044502,
              40.63320458086113
            ],
            [
              -8.660426329200863,
              40.63320458086113
            ],
            [
              -8.660426329200863,
              40.63323013109084
            ],
            [
              -8.66034629424046,
              40.63323013109084
            ],
            [
              -8.66034629424046,
              40.633223743533414
            ],
            [
              -8.660353003758098,
              40.633223743533414
            ],
            [
              -8.660353003758098,
              40.633228657039126
            ],
            [
              -8.660424891447084,
              40.633228657039126
            ],
            [
              -8.660424891447084,
              40.63320310680942
            ],
            [
              -8.66044358224622,
              40.63320310680942
            ],
            [
              -8.66044358224622,
              40.63320261545884
            ],
            [
              -8.66043926898488,
              40.63318148738428
            ],
            [
              -8.660429204708423,
              40.633165518490706
            ],
            [
              -8.660415306421886,
              40.633152252025276
            ],
            [
              -8.660405721396687,
              40.63313702015756
            ],
            [
              -8.660402127012238,
              40.633117120459424
            ],
            [
              -8.66039134385889,
              40.633117120459424
            ],
            [
              -8.66039134385889,
              40.633089604827425
            ],
            [
              -8.660353003758098,
              40.633089604827425
            ],
            [
              -8.660353003758098,
              40.633107293448
            ],
            [
              -8.660355879265659,
              40.633107293448
            ],
            [
              -8.660355879265659,
              40.63311269830428
            ],
            [
              -8.660353003758098,
              40.63311269830428
            ],
            [
              -8.660353003758098,
              40.633149058246566
            ],
            [
              -8.6603506075018,
              40.633149058246566
            ],
            [
              -8.6603506075018,
              40.633138739884565
            ],
            [
              -8.660315142908567,
              40.633138739884565
            ],
            [
              -8.660315142908567,
              40.633136283131705
            ],
            [
              -8.6603506075018,
              40.633136283131705
            ],
            [
              -8.6603506075018,
              40.63309451833314
            ],
            [
              -8.660336709215262,
              40.63309451833314
            ],
            [
              -8.660336709215262,
              40.633114172355995
            ],
            [
              -8.66034006397408,
              40.633114172355995
            ],
            [
              -8.66034006397408,
              40.633116629108855
            ],
            [
              -8.660334312958962,
              40.633116629108855
            ],
            [
              -8.660334312958962,
              40.63309451833314
            ],
            [
              -8.660320893923686,
              40.63309451833314
            ],
            [
              -8.660320893923686,
              40.633114172355995
            ],
            [
              -8.660324248682505,
              40.633114172355995
            ],
            [
              -8.660324248682505,
              40.633116629108855
            ],
            [
              -8.660315142908567,
              40.633116629108855
            ],
            [
              -8.660315142908567,
              40.633114172355995
            ],
            [
              -8.660318497667387,
              40.633114172355995
            ],
            [
              -8.660318497667387,
              40.63309451833314
            ],
            [
              -8.660305078632108,
              40.63309451833314
            ],
            [
              -8.660305078632108,
              40.633138739884565
            ],
            [
              -8.66029788986321,
              40.633138739884565
            ],
            [
              -8.66029788986321,
              40.63313480908
            ],
            [
              -8.660184307314614,
              40.63313480908
            ],
            [
              -8.660184307314614,
              40.63313235232714
            ],
            [
              -8.66029788986321,
              40.63313235232714
            ],
            [
              -8.66029788986321,
              40.633072898908
            ],
            [
              -8.660165137264219,
              40.633072898908
            ],
            [
              -8.660165137264219,
              40.63313235232714
            ],
            [
              -8.660167533520518,
              40.63313235232714
            ],
            [
              -8.660167533520518,
              40.63313480908
            ],
            [
              -8.660161303254139,
              40.63313480908
            ],
            [
              -8.660161303254139,
              40.633072898908
            ],
            [
              -8.66010618935925,
              40.633072898908
            ],
            [
              -8.66010618935925,
              40.63313235232714
            ],
            [
              -8.660150759726422,
              40.63313235232714
            ],
            [
              -8.660150759726422,
              40.63313480908
            ],
            [
              -8.66010954411807,
              40.63313480908
            ],
            [
              -8.66010954411807,
              40.633139231235134
            ],
            [
              -8.66010714786177,
              40.633139231235134
            ],
            [
              -8.66010714786177,
              40.63313480908
            ],
            [
              -8.660103793102952,
              40.63313480908
            ],
            [
              -8.660103793102952,
              40.633072898908
            ],
            [
              -8.660067849258459,
              40.633072898908
            ],
            [
              -8.660067849258459,
              40.63313480908
            ],
            [
              -8.660032863916486,
              40.63313480908
            ],
            [
              -8.660032863916486,
              40.63313235232714
            ],
            [
              -8.66006545300216,
              40.63313235232714
            ],
            [
              -8.66006545300216,
              40.633072898908
            ],
            [
              -8.66001896562995,
              40.633072898908
            ],
            [
              -8.66001896562995,
              40.63313235232714
            ],
            [
              -8.660021841137509,
              40.63313235232714
            ],
            [
              -8.660021841137509,
              40.63313480908
            ],
            [
              -8.66001417311735,
              40.63313480908
            ],
            [
              -8.66001417311735,
              40.63313235232714
            ],
            [
              -8.66001656937365,
              40.63313235232714
            ],
            [
              -8.66001656937365,
              40.633072898908
            ],
            [
              -8.659987335046797,
              40.633072898908
            ],
            [
              -8.659987335046797,
              40.63313235232714
            ],
            [
              -8.660003150338373,
              40.63313235232714
            ],
            [
              -8.660003150338373,
              40.63313480908
            ],
            [
              -8.65996385173506,
              40.63313480908
            ],
            [
              -8.65996385173506,
              40.63313235232714
            ],
            [
              -8.659984938790496,
              40.63313235232714
            ],
            [
              -8.659984938790496,
              40.633072898908
            ],
            [
              -8.659931262649389,
              40.633072898908
            ],
            [
              -8.659931262649389,
              40.63313235232714
            ],
            [
              -8.659952828956083,
              40.63313235232714
            ],
            [
              -8.659952828956083,
              40.63313480908
            ],
            [
              -8.659908258588914,
              40.63313480908
            ],
            [
              -8.659908258588914,
              40.63313235232714
            ],
            [
              -8.659928866393088,
              40.63313235232714
            ],
            [
              -8.659928866393088,
              40.633072898908
            ],
            [
              -8.65987566950324,
              40.633072898908
            ],
            [
              -8.65987566950324,
              40.63313235232714
            ],
            [
              -8.659896277307416,
              40.63313235232714
            ],
            [
              -8.659896277307416,
              40.63313480908
            ],
            [
              -8.659876148754499,
              40.63313480908
            ],
            [
              -8.659876148754499,
              40.633139231235134
            ],
            [
              -8.659868001483082,
              40.633139231235134
            ],
            [
              -8.659868001483082,
              40.63309451833314
            ],
            [
              -8.659853623945285,
              40.63309451833314
            ],
            [
              -8.659853623945285,
              40.633114172355995
            ],
            [
              -8.659857457955363,
              40.633114172355995
            ],
            [
              -8.659857457955363,
              40.633116629108855
            ],
            [
              -8.659846914427646,
              40.633116629108855
            ],
            [
              -8.659846914427646,
              40.633114172355995
            ],
            [
              -8.659851227688986,
              40.633114172355995
            ],
            [
              -8.659851227688986,
              40.63309451833314
            ],
            [
              -8.659836370899928,
              40.63309451833314
            ],
            [
              -8.659836370899928,
              40.63313235232714
            ],
            [
              -8.659856499452843,
              40.63313235232714
            ],
            [
              -8.659856499452843,
              40.63313677448228
            ],
            [
              -8.659857457955363,
              40.63313677448228
            ],
            [
              -8.659857457955363,
              40.633139231235134
            ],
            [
              -8.659854103196544,
              40.633139231235134
            ],
            [
              -8.659854103196544,
              40.63313480908
            ],
            [
              -8.659836370899928,
              40.63313480908
            ],
            [
              -8.659836370899928,
              40.633146601493706
            ],
            [
              -8.659833974643629,
              40.633146601493706
            ],
            [
              -8.659833974643629,
              40.63312596476971
            ],
            [
              -8.65978461176386,
              40.63312596476971
            ],
            [
              -8.65978461176386,
              40.63315888525799
            ],
            [
              -8.659833974643629,
              40.63315888525799
            ],
            [
              -8.659833974643629,
              40.633157902556846
            ],
            [
              -8.659836370899928,
              40.633157902556846
            ],
            [
              -8.659836370899928,
              40.63316183336142
            ],
            [
              -8.659833974643629,
              40.63316183336142
            ],
            [
              -8.659833974643629,
              40.63316134201085
            ],
            [
              -8.659814325341973,
              40.63316134201085
            ],
            [
              -8.659814325341973,
              40.63316183336142
            ],
            [
              -8.659811929085674,
              40.63316183336142
            ],
            [
              -8.659811929085674,
              40.63316134201085
            ],
            [
              -8.65978461176386,
              40.63316134201085
            ],
            [
              -8.65978461176386,
              40.6331947538497
            ],
            [
              -8.659811929085674,
              40.6331947538497
            ],
            [
              -8.659811929085674,
              40.633173625775136
            ],
            [
              -8.659814325341973,
              40.633173625775136
            ],
            [
              -8.659814325341973,
              40.633174608476274
            ],
            [
              -8.659816721598272,
              40.633174608476274
            ],
            [
              -8.659816721598272,
              40.633177065229134
            ],
            [
              -8.659814325341973,
              40.633177065229134
            ],
            [
              -8.659814325341973,
              40.6331947538497
            ],
            [
              -8.659833974643629,
              40.6331947538497
            ],
            [
              -8.659833974643629,
              40.633177065229134
            ],
            [
              -8.65982822362851,
              40.633177065229134
            ],
            [
              -8.65982822362851,
              40.633174608476274
            ],
            [
              -8.659833974643629,
              40.633174608476274
            ],
            [
              -8.659833974643629,
              40.633173625775136
            ],
            [
              -8.659836370899928,
              40.633173625775136
            ],
            [
              -8.659836370899928,
              40.63317952198199
            ],
            [
              -8.659857457955363,
              40.63317952198199
            ],
            [
              -8.659857457955363,
              40.63318197873485
            ],
            [
              -8.659836370899928,
              40.63318197873485
            ],
            [
              -8.659836370899928,
              40.633223743533414
            ],
            [
              -8.659851227688986,
              40.633223743533414
            ],
            [
              -8.659851227688986,
              40.6332050722117
            ],
            [
              -8.659847872930165,
              40.6332050722117
            ],
            [
              -8.659847872930165,
              40.63320261545884
            ],
            [
              -8.659857457955363,
              40.63320261545884
            ],
            [
              -8.659857457955363,
              40.6332050722117
            ],
            [
              -8.659853623945285,
              40.6332050722117
            ],
            [
              -8.659853623945285,
              40.633223743533414
            ],
            [
              -8.659868001483082,
              40.633223743533414
            ],
            [
              -8.659868001483082,
              40.63317952198199
            ],
            [
              -8.65987566950324,
              40.63317952198199
            ],
            [
              -8.65987566950324,
              40.633245362958554
            ],
            [
              -8.659948036443485,
              40.633245362958554
            ],
            [
              -8.659948036443485,
              40.63318394413713
            ],
            [
              -8.659891484794816,
              40.63318394413713
            ],
            [
              -8.659891484794816,
              40.63317952198199
            ],
            [
              -8.659964330986321,
              40.63317952198199
            ],
            [
              -8.659964330986321,
              40.63318394413713
            ],
            [
              -8.659951870453563,
              40.63318394413713
            ],
            [
              -8.659951870453563,
              40.633245362958554
            ],
            [
              -8.660039573434124,
              40.633245362958554
            ],
            [
              -8.660039573434124,
              40.63318394413713
            ],
            [
              -8.659980146277897,
              40.63318394413713
            ],
            [
              -8.659980146277897,
              40.63315691985571
            ],
            [
              -8.659986376544277,
              40.63315691985571
            ],
            [
              -8.659986376544277,
              40.63315937660856
            ],
            [
              -8.659983021785457,
              40.63315937660856
            ],
            [
              -8.659983021785457,
              40.63318148738428
            ],
            [
              -8.660039573434124,
              40.63318148738428
            ],
            [
              -8.660039573434124,
              40.633174117125705
            ],
            [
              -8.660041969690424,
              40.633174117125705
            ],
            [
              -8.660041969690424,
              40.63321735597599
            ],
            [
              -8.660075038027358,
              40.63321735597599
            ],
            [
              -8.660075038027358,
              40.63315691985571
            ],
            [
              -8.660080309791216,
              40.63315691985571
            ],
            [
              -8.660080309791216,
              40.633160359309706
            ],
            [
              -8.660077434283657,
              40.633160359309706
            ],
            [
              -8.660077434283657,
              40.63318050468313
            ],
            [
              -8.660093728826494,
              40.63318050468313
            ],
            [
              -8.660093728826494,
              40.633160359309706
            ],
            [
              -8.660090374067675,
              40.633160359309706
            ],
            [
              -8.660090374067675,
              40.63315691985571
            ],
            [
              -8.660096125082793,
              40.63315691985571
            ],
            [
              -8.660096125082793,
              40.63318934899342
            ],
            [
              -8.660093728826494,
              40.63318934899342
            ],
            [
              -8.660093728826494,
              40.63318345278656
            ],
            [
              -8.660077434283657,
              40.63318345278656
            ],
            [
              -8.660077434283657,
              40.63321735597599
            ],
            [
              -8.66010714786177,
              40.63321735597599
            ],
            [
              -8.66010714786177,
              40.63316134201085
            ],
            [
              -8.66010618935925,
              40.63316134201085
            ],
            [
              -8.66010618935925,
              40.63315691985571
            ],
            [
              -8.660110023369331,
              40.63315691985571
            ],
            [
              -8.660110023369331,
              40.63321735597599
            ],
            [
              -8.660131110424766,
              40.63321735597599
            ],
            [
              -8.660131110424766,
              40.63316134201085
            ],
            [
              -8.660124880158387,
              40.63316134201085
            ],
            [
              -8.660124880158387,
              40.63315691985571
            ],
            [
              -8.660144050208784,
              40.63315691985571
            ],
            [
              -8.660144050208784,
              40.63315937660856
            ],
            [
              -8.660133506681065,
              40.63315937660856
            ],
            [
              -8.660133506681065,
              40.63318148738428
            ],
            [
              -8.66015603149028,
              40.63318148738428
            ],
            [
              -8.66015603149028,
              40.63315937660856
            ],
            [
              -8.66015555223902,
              40.63315937660856
            ],
            [
              -8.66015555223902,
              40.63315691985571
            ],
            [
              -8.660174243038156,
              40.63315691985571
            ],
            [
              -8.660174243038156,
              40.63315937660856
            ],
            [
              -8.66015842774658,
              40.63315937660856
            ],
            [
              -8.66015842774658,
              40.63318148738428
            ],
            [
              -8.660190058329734,
              40.63318148738428
            ],
            [
              -8.660190058329734,
              40.63315937660856
            ],
            [
              -8.660186224319654,
              40.63315937660856
            ],
            [
              -8.660186224319654,
              40.63315691985571
            ],
            [
              -8.660192454586033,
              40.63315691985571
            ],
            [
              -8.660192454586033,
              40.63318394413713
            ],
            [
              -8.660133506681065,
              40.63318394413713
            ],
            [
              -8.660133506681065,
              40.633245362958554
            ],
            [
              -8.660213541641468,
              40.633245362958554
            ],
            [
              -8.660213541641468,
              40.63318390875989
            ],
            [
              -8.660208269877609,
              40.63318394413713
            ],
            [
              -8.660208269877609,
              40.63317952198199
            ],
            [
              -8.660281116069115,
              40.63317952198199
            ],
            [
              -8.660281116069115,
              40.63318394413713
            ],
            [
              -8.660217854902807,
              40.63318394413713
            ],
            [
              -8.660217854902807,
              40.633245362958554
            ],
            [
              -8.66029788986321,
              40.633245362958554
            ],
            [
              -8.66029788986321,
              40.63318394413713
            ],
            [
              -8.66029693136069,
              40.63318394413713
            ],
            [
              -8.66029693136069,
              40.63317952198199
            ],
            [
              -8.660305078632108,
              40.63317952198199
            ],
            [
              -8.660305078632108,
              40.633223743533414
            ],
            [
              -8.660318497667387,
              40.633223743533414
            ],
            [
              -8.660318497667387,
              40.63320605491285
            ],
            [
              -8.660315142908567,
              40.63320605491285
            ],
            [
              -8.660315142908567,
              40.63320359815999
            ],
            [
              -8.660324248682505,
              40.63320359815999
            ],
            [
              -8.660324248682505,
              40.63320605491285
            ],
            [
              -8.660320893923686,
              40.63320605491285
            ],
            [
              -8.660320893923686,
              40.633223743533414
            ],
            [
              -8.660334312958962,
              40.633223743533414
            ],
            [
              -8.660334312958962,
              40.63320359815999
            ],
            [
              -8.660336709215262,
              40.63320359815999
            ],
            [
              -8.660336709215262,
              40.633206546263416
            ],
            [
              -8.6603506075018,
              40.633206546263416
            ],
            [
              -8.6603506075018,
              40.63318197873485
            ],
            [
              -8.660315142908567,
              40.63318197873485
            ],
            [
              -8.660315142908567,
              40.63317952198199
            ],
            [
              -8.6603506075018,
              40.63317952198199
            ],
            [
              -8.6603506075018,
              40.63317067767171
            ],
            [
              -8.660353003758098,
              40.63317067767171
            ],
            [
              -8.660353003758098,
              40.6332050722117
            ],
            [
              -8.660355879265659,
              40.6332050722117
            ],
            [
              -8.660355879265659,
              40.63321047706799
            ],
            [
              -8.660353003758098,
              40.63321047706799
            ],
            [
              -8.660353003758098,
              40.63321342517141
            ],
            [
              -8.6603506075018,
              40.63321342517141
            ],
            [
              -8.6603506075018,
              40.63321047706799
            ],
            [
              -8.660336709215262,
              40.63321047706799
            ],
            [
              -8.660336709215262,
              40.633223743533414
            ],
            [
              -8.660345814989201,
              40.633223743533414
            ],
            [
              -8.660345814989201,
              40.63323013109084
            ],
            [
              -8.66030412012959,
              40.63323013109084
            ],
            [
              -8.66030412012959,
              40.63325325
            ],
            [
              -8.660124400907128,
              40.63325325
            ],
            [
              -8.660124400907128,
              40.633245362958554
            ]
          ]
        ]
      },
      "properties": {
        "id": "0-0",
        "element_type": "path"
      }
    }
  ],
  "metadata": {
    "made_by": "Violeta Batista Ramos",
    "pain_level": "medium"
  }
}
    const map = new maplibregl.Map({
        container: 'map',
        style: {
            'id': 'raster',
            'version': 8,
            'name': 'Raster tiles',
            'center': [0, 0],
            'zoom': 0,
            'sources': {
                'raster-tiles': {
                    'type': 'raster',
                    'tiles': ['https://tile.openstreetmap.org/{z}/{x}/{y}.png'],
                    'tileSize': 256,
                    'minzoom': 0,
                    'maxzoom': 25

                }
            },
            'layers': [
                {
                    'id': 'background',
                    'type': 'background',
                    'paint': {
                        'background-color': '#e0dfdf'
                    }
                },
                {
                    'id': 'simple-tiles',
                    'type': 'raster',
                    'source': 'raster-tiles'
                }
            ]
        },
        center: [-8.659,  40.633],
        zoom: 15.99,
        canvasContextAttributes: {antialias: true}
    });
    map.addControl(new maplibregl.NavigationControl());

    map.on('load', () => {
        map.addSource('floorplan', {
            // GeoJSON Data source used in vector tiles, documented at
            // https://gist.github.com/ryanbaumann/a7d970386ce59d11c16278b90dde094d
            'type': 'geojson',
            'data': pain,
        });
        map.addLayer({
            'id': 'room-extrusion',
            'type': 'fill-extrusion',
            'source': 'floorplan',
            'paint': {
                // See the MapLibre Style Specification for details on data expressions.
                // https://maplibre.org/maplibre-style-spec/expressions/

                // Get the fill-extrusion-color from the source 'color' property.
                'fill-extrusion-color': ['get', 'color'],
                'fill-extrusion-height': 10,
                'fill-extrusion-base': 0,
                'fill-extrusion-opacity': 0.8
            }
        });
    });
</script>
</body>
</html>